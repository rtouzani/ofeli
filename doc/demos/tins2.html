<!DOCTYPE HTML>
<html>
  <script src="http://www.w3schools.com/lib/w3data.js"></script>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="ofeli package" />
    <meta name="keywords" content="Modelling, numerical simulation, scientific computing, ofeli" />
    <title>ofeli library</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <link rel="icon" type="image/png" sizes="10x10" href="../im/r.jpg" />

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-59742926-2', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="../im/ofeli.png">
    <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700" rel="stylesheet">

    <link rel="stylesheet" href="../css/doxygen.css">
    <link rel="stylesheet" href="../css/animate.css">
    <link rel="stylesheet" href="../css/icomoon.css">
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/flexslider.css">
    <link rel="stylesheet" href="../fonts/flaticon/font/flaticon.css">
    <link rel="stylesheet" href="../css/owl.carousel.min.css">
    <link rel="stylesheet" href="../css/owl.theme.default.min.css">
    <link rel="stylesheet" href="../css/ofeli-style.css">
    <link rel="stylesheet" href="../css/doc.css">

<!--    Modernizr JS -->
    <script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
      <script src="js/respond.min.js"></script>
      <![endif]-->
  </head>

  <body>
    <div id="ofeli-page">
      <div class="container-wrap">
        <aside id="ofeli-aside" role="complementary" class="border js-fullheight">
          <div class="text-center">
            <a href="../index.html">
              <div class="logo-ofeli-img" style="background-image: url(../im/ofeli.png); background-size: 110%;"></div>
            </a>
            <span class="position"><b>Mathematical Modelling<br> and Numerical Simulation</b></span>
          </div>
          <div>
            <ul>
                <li class="active"><a href="../index.html">OFELI Documentation</a></li>
                <li class="active"><a href="../html/classes.html">Classes in OFELI</a></li>
                <li class="active"><a href="../fformats.html">File Formats</span></a></li>
                <li class="active"><a href="../extlib.html">External Libraries</span></a></li>
                <li class="active"><a href="../citing.html">Citing OFELI</span></a></li>
                <li class="active"><a href="../download.html">Download and Installation</a></li>
                <li class="active"><a href="../news.html">News</span></a></li>
                <li class="active"><a href="../presentations.html">Presentations</a></li>
                <li class="active"><a href="../copyright.html">License</a></li>
                <li class="active"><a href="mailto:rachid.touzani@uca.fr">Contact</a></li>
            </ul>
        </div>

        <a href="rita.html"><center><img src="../im/rita.png" width="90"></center></a>

<!--      Search Google -->
          <center>
            <form method=GET action="http://www.google.com/search">
              <table bgcolor="#FFFFFF">
                <tr>
                  <td><a href=" http://www.google.com/">
                    <img src="http://www.google.com/logos/Logo_40wht.gif" border="0" alt="Google" align="absmiddle"></a> 
                    <input TYPE=TEXT name=q size=31 maxlength=255 value="">
                    <input type=hidden name=hl value="en">
                    <input type=submit name=btnG value="Search">
                  </td>
                </tr>
              </table>
            </form>
          </center>
 <!--     Search Google -->
 
          <div class="ofeli-footer">
            <p><small>&copy; Copyright <script>document.write(new Date().getFullYear());</script> All rights reserved</small>
            </p>
          </div>
        </aside>
        <div id="ofeli-main">
          <section class="ofeli-start" data-section="home">
            <div class="ofeli-narrow-content">
              <div class="row">
                <div class="col-md-12">
                  <div class="row row-bottom-padded-sm animate-box" data-animate-effect="fadeInLeft">
                    <div class="col-md-12">
                      <div class="start-desc">
                        <h1 class="first-ofeli-heading"></h1>
                        <div id="cc">
                           &nbsp;
                           <p>
                           <h2>Demo: A 2-D incompressible CFD problem using
                            triangles and a projection time integration method</h2>
                           
                           <p><table border="2" cellpadding="2" cellspacing="0" >
                           <tr>
                           <td align="center" width="35"><a href="tiff2.html"><img src="../im/backward.gif" border="0"></a></td>
                           <td align="center" width="35"><a href="../demos.html"><img src="../im/top.gif" border="0"></a></td>
                           <td align="center" width="35"><a href="ls_demo1.html"><img src="../im/forward.gif" border="0"></a></td>
                           </tr>
                           </table>
                           
                           
                           &nbsp;&nbsp;
                           <h1>The main program</h1>
                           
                           <p>
                           <SPAN class=TEXT>
                           We present an <span class=logo>OFELI</span> program that solves the
                           2-D time-dependent incompressible Navier-Stokes equations. For this
                           demo, we solve these equations by a time integration projection
                           method. Space discretisation is handled by a triangular finite element method.
                           </SPAN>
                           
                           <ul type=square>
                              <li><SPAN class=TEXT>We start by including the classes for fluid dynamics:
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                                 <tr><td>
                                    <pre><font color="blue" size=2>   #include "OFELI.h"
   #include "Fluid.h"</font></pre>
                                 </td></tr></table>
                              </SPAN></p>
                           
                           <li><SPAN class=TEXT>Like for the previous example, we define an
                           instance of class <span class=VAR><a href="../html/classOFELI_1_1IPF.html">IPF</a></span>
                           to handle project data. We also define as data the Reynolds number
                           <span class=TT>Re</span>.
                           
                           <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                           <tr><td>
                              <pre><font color="blue" size=2>   IPF proj(argv[1]);
   Verbosity = proj.getVerbose();
   Mesh mesh(proj.getMeshFile());
   theTimeStep = proj.getTimeStep();
   theFinalTime = proj.getMaxTime();
   int plot_flag = proj.getPlot();
   double Re = proj.getDouble("Reynolds");</font></pre>
                           </td></tr></table>
                           </SPAN></p>
                           
                           <li><SPAN class=TEXT>To store the solution we define two files, for
                           velocity and pressure by using the class  <span class=VAR><a
                           href="../html/classOFELI_1_1IOField.html">IOField</a></span>. The
                           resulting velocity and pressure vectors will be stored in
                           corresponding files for postprocessing.
                           <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                           <tr><td>
                           <pre><font color="blue" size=2>   IOField vff(proj.getMeshFile(),proj.getString("v_file"),mesh,IOField::OUT);
   IOField pff(proj.getMeshFile(),proj.getString("p_file"),mesh,IOField::OUT);</font></pre>
                           </td></tr></table>
                           </SPAN></p>
                           
                           <li><SPAN class=TEXT>
                           We now define vectors that will contain the solution (<span class=TT>u</span> and <span class=TT>p</span>
                           for velocity and pressure respectively)
                           and then we define an instance of class 
                           <span class=VAR><a href="../html/classOFELI_1_1TINS2DT3S.html">TINS2D3TS</a></span> that solves 2-D incompressible
                           Navier-Stokes equations using the projection method with P<sub>1</sub> elements for velocity and pressure.
                           We also trasmit two data to this instance.
                           <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                           <tr><td>
                           <pre><font color="blue" size=2>   Vect&lt;double&gt; u(mesh,"Velocity",0), p(mesh,"Pressure",0,1);
   TINS2DT3S eq(mesh);
   eq.Reynolds(Re);
   eq.setTolerance(proj.getTolerance());</font></pre>
                           </td></tr></table>
                           </SPAN></p>
                           
                           We have next to declare vectors for initial conditions, boundary
                           conditions, ... To initialize these vectors, the class
                           <span class=VAR><a href="../html/classOFELI_1_1Prescription.html">Prescription</a></span>
                           can be used. We note that these conditions are read in the same file
                           as the project file. For instance to assign initial conditions, we can
                           retrieve this information in this file, then transmit it to the
                           equation by the member function <span class=TT>setInput</span>:
                           <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                           <tr><td>
                           <pre><font color="blue" size=2>   Vect&lt;double&gt; bc(mesh), bf(mesh);
   Prescription pr(mesh,proj.getDataFile());
   pr.get(INITIAL_FIELD,u);
   eq.setInput(INITIAL_FIELD,u);</font></pre>
                           </td></tr></table>
                           </SPAN></p>
                           
                           <li><SPAN class=TEXT>
                           We are now ready to start computations, <i>i.e.</i> looping over time
                           steps. We have to assign
                           necessary data at each time step and then run the step.</p>
                           
                           For each datum, we use the function <span class=TT>get</span> to
                           obtain from the <span class=VAR><a href="../html/classOFELI_1_1Prescription.html">Prescription</a></span>
                           instance the vector, and then the function <span class=TT>set</span> to transmit to the
                           <span class=VAR><a href="../html/classOFELI_1_1TINS2DT3S.html">TINS2DT3S</a></span> instance the
                           vector.
                           We may also note that at each time step the vectors <span class=TT>u</span> and <span class=TT>p</span> contain 
                           respectively the velocity and pressure for the current time step, so we can save
                           them in appropriate files.
                           <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                           <tr><td>
                           <pre><font color="blue" size=2>   TimeLoop {
      eq.setInput(BOUNDARY_CONDITION,pr.get(BOUNDARY_CONDITION,theTime));
      eq.setInput(BODY_FORCE,pr.get(BODY_FORCE,theTime));
      eq.runOneTimeStep();
      if (plot_flag>0 && theStep%plot_flag==0) {
         p.setTime(theTime); u.setTime(theTime);
         vff.put(u); pff.put(p);
      }
   }</font></pre>
                           </td></tr></table>
                           </SPAN>
                           </font></pre>
                           </td></tr></table>
                           </SPAN></p>
                           </ul>

                           &nbsp;&nbsp;
                           <h1>An example</h1>
                           
                           <SPAN class=TEXT>
                           Let us run this program with the data presented in the following project file:
                           <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                           <tr><td>
                           <pre><font color="blue" size=2>&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;
&lt;OFELI_File&gt;
   &lt;info&gt;
      &lt;title&gt;&lt;/title&gt;
      &lt;date&gt;&lt;/date&gt;
      &lt;author&gt;&lt;/author&gt;
   &lt;/info&gt;
   &lt;Project name="cavity"&gt;
      &lt;time_step value="0.01"/&gt;
      &lt;max_time value="0.5"/&gt;
      &lt;verbose value="1"/&gt;
      &lt;plot value="10"/&gt;
      &lt;mesh_file value="cavity-30.m"/&gt;
      &lt;parameter label="Reynolds" value="1"/&gt;
      &lt;parameter label="v_file" value="cavity.v"/&gt;
      &lt;parameter label="p_file" value="cavity.p"/&gt;
   &lt;/Project&gt;
   &lt;Prescription&gt;
      &lt;BoundaryCondition code="2" dof="1"&gt;1&lt;/BoundaryCondition&gt;
   &lt;/Prescription&gt;
&lt;/OFELI_File&gt;</font></pre>
                           </td></tr></table></p>
                           
                           <p>
                           Note that we have also a section describing prescription data where a
                           boundary condition is given: We impose the value <span class=TT>1.0</span>
                           to the horizontal velocity <span class=TT>dof="1"</span> for nodes
                           with a code equal to <span class=TT>2</span>.
                           All other data that are not given are by default set to  <span class=TT>0</span>.
                           
                           <p><table align="center" border="2" cellpadding="2" cellspacing="0" >
                           <tr>
                           <td align="center" width="35"><a href="tiff2.html"><img src="../im/backward.gif" border="0"></a></td>
                           <td align="center" width="35"><a href="../demos.html"><img src="../im/top.gif" border="0"></a></td>
                           <td align="center" width="35"><a href="ls_demo1.html"><img src="../im/forward.gif" border="0"></a></td>
                           </tr>
                           </table>
                        </div>
                     </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.flexslider-min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.countTo.js"></script>
    <script src="js/ofeli-main.js"></script>

  </body>
</html>
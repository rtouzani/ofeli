<!DOCTYPE HTML>
<html>
  <script src="http://www.w3schools.com/lib/w3data.js"></script>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="ofeli package" />
    <meta name="keywords" content="Modelling, numerical simulation, scientific computing, ofeli" />
    <title>ofeli library</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <link rel="icon" type="image/png" sizes="10x10" href="../im/r.jpg" />

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-59742926-2', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="../im/ofeli.png">
    <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700" rel="stylesheet">

    <link rel="stylesheet" href="../css/doxygen.css">
    <link rel="stylesheet" href="../css/animate.css">
    <link rel="stylesheet" href="../css/icomoon.css">
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/flexslider.css">
    <link rel="stylesheet" href="../fonts/flaticon/font/flaticon.css">
    <link rel="stylesheet" href="../css/owl.carousel.min.css">
    <link rel="stylesheet" href="../css/owl.theme.default.min.css">
    <link rel="stylesheet" href="../css/ofeli-style.css">
    <link rel="stylesheet" href="../css/doc.css">

<!--    Modernizr JS -->
    <script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
      <script src="js/respond.min.js"></script>
      <![endif]-->
  </head>

  <body>
    <div id="ofeli-page">
      <div class="container-wrap">
        <aside id="ofeli-aside" role="complementary" class="border js-fullheight">
          <div class="text-center">
            <a href="../index.html">
              <div class="logo-ofeli-img" style="background-image: url(../im/ofeli.png); background-size: 110%;"></div>
            </a>
            <span class="position"><b>Mathematical Modelling<br> and Numerical Simulation</b></span>
          </div>
          <div>
            <ul>
                <li class="active"><a href="../index.html">OFELI Documentation</a></li>
                <li class="active"><a href="../html/classes.html">Classes in OFELI</a></li>
                <li class="active"><a href="../fformats.html">File Formats</span></a></li>
                <li class="active"><a href="../extlib.html">External Libraries</span></a></li>
                <li class="active"><a href="../citing.html">Citing OFELI</span></a></li>
                <li class="active"><a href="../download.html">Download and Installation</a></li>
                <li class="active"><a href="../news.html">News</span></a></li>
                <li class="active"><a href="../presentations.html">Presentations</a></li>
                <li class="active"><a href="../copyright.html">License</a></li>
                <li class="active"><a href="mailto:rachid.touzani@uca.fr">Contact</a></li>
            </ul>
        </div>

        <a href="rita.html"><center><img src="../im/rita.png" width="90"></center></a>

<!--      Search Google -->
          <center>
            <form method=GET action="http://www.google.com/search">
              <table bgcolor="#FFFFFF">
                <tr>
                  <td><a href=" http://www.google.com/">
                    <img src="http://www.google.com/logos/Logo_40wht.gif" border="0" alt="Google" align="absmiddle"></a> 
                    <input TYPE=TEXT name=q size=31 maxlength=255 value="">
                    <input type=hidden name=hl value="en">
                    <input type=submit name=btnG value="Search">
                  </td>
                </tr>
              </table>
            </form>
          </center>
 <!--     Search Google -->
 
          <div class="ofeli-footer">
            <p><small>&copy; Copyright <script>document.write(new Date().getFullYear());</script> All rights reserved</small>
            </p>
          </div>
        </aside>
        <div id="ofeli-main">
          <section class="ofeli-start" data-section="home">
            <div class="ofeli-narrow-content">
              <div class="row">
                <div class="col-md-12">
                  <div class="row row-bottom-padded-sm animate-box" data-animate-effect="fadeInLeft">
                    <div class="col-md-12">
                      <div class="start-desc">
                        <h1 class="first-ofeli-heading"></h1>
                        <div id="cc">
                           &nbsp;
                           <p><table border="2" cellpadding="2" cellspacing="0" >
                           <tr>
                           <td align="center" width="35"><a href="contact.html"><img src="../im/backward.gif" border="0"></a></td>
                           <td align="center" width="35"><a href="../demos.html"><img src="../im/top.gif" border="0"></a></td>
                           <td align="center" width="35"><a href="truss.html"><img src="../im/forward.gif" border="0"></a></td>
                           </tr>
                           </table><br>
                           <font color="#203F5B" size="4" face="verdana,Helvetica">
                           <p><b>Demo: A planar beam</b></font></p>
                           <p>
                              <SPAN class=TEXT>
                              This code solves an elastic beam problem in structural mechanics theory. The libray <span class=logo>OFELI</span>
                              contains the class <span class=var><a href="../html/classOFELI_1_1Beam3DL2.html">Beam3DL2</a></span> that handles
                              elastic beams in the space with 6 degrees of freedom for each node. These degrees of freedom are supported
                              by the vertices of each element line.
                              </SPAN>
                              
                              <ul type=square>
                              <li><SPAN class=TEXT>We start by defining an instance of class <span class=var>
                              <a href="../html/classOFELI_1_1IPF.html">IPF</a></span> to deal with project data.
                              We extract useful information from this instance: A verbosity and an output flag to deal with 
                              output levels. We next construct the 
                              <span class=var><a href="../html/classOFELI_1_1Mesh.html">Mesh</a></span> and the 
                              <span class=var><a href="../html/classOFELI_1_1Prescription.html">Prescription</a></span> instances.
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   IPF data("beam - 1.0",argv[1]);
   int verbose = data.getVerbose();
   int output_flag = data.getOutput();
   Mesh ms(data.getMeshFile());
   Prescription p(ms,data.getDataFile());</font></pre>
                              </td></tr></table>
                              </SPAN></p>
                              
                              <li><SPAN class=TEXT>
                              The linear system uses a symmetric matrix. For this, we
                              we use an instance of class <span class=var><a href="../html/classOFELI_1_1SkSMatrix.html">SkSMatrix&lt;double&gt;</a></span>.
                              Then we declare a vector that will contain the right-hand side and then
                              the solution. Next, we read boundary conditions and prescribed concentrated loads
                              from the prescription file. These are stored in vectors <span class=TT>bc</span>
                              and <span class=TT>bf</span> respectively:
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   SkSMatrix&lt;double&gt; A(ms);
   Vect&lt;double&gt; b(ms), bc(ms), bf(ms);
   p.get(BOUNDARY_CONDITION,bc,0);
   p.get(POINT_FORCE,bf);</font></pre>
                              </td></tr></table>
                              </SPAN></p>
                              
                              <li><SPAN class=TEXT>The global matrix and right-hand side are, as usual, filled
                              by looping over elements. For each element, an instance of class 
                              <span class=var><a href="../html/classOFELI_1_1Beam3DL2.html">Beam3DL2</a></span>
                              is considered. This class deals with quadrilateral elements. The member function
                              <span class=TT>Stiffness</span> adds the contribution of the element stiffness
                              matrix. 
                              The other member functions have already been considered in previous lessons.
                              Note that the load vector is a copy of the concentrated load vector. No need for
                              assembly here.
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   MeshElements(ms) {
      Beam3DL2 eq(theElement,0.1,0.1,0.1);
      eq.Stiffness();
      eq.ElementAssembly(A);
      eq.ElementAssembly(b);
   }
   b = bf;</font></pre>
                              </td></tr></table>
                              </SPAN></p>
                              
                              <li><SPAN class=TEXT>We can now prescribe boundary conditions by penalty method
                              and solve the resulting linear system by factorization and backsubstitution.
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   A.Prescribe(b,bc);
   A.solve(b);</font></pre>
                              </td></tr></table>
                              </SPAN></p>
                              
                              <li type=square><SPAN class=TEXT>Let us now extract some additional information from
                              the class. We want to output, for each element, the axial force, the bending moment, the
                              twisting moment and the shear force. This is done simply by invoking corresponding member
                              functions in the class <span class=var><a href="../html/classOFELI_1_1Beam3DL2.html">Beam3DL2</a></span>.
                              Note that we need, before that, to construct the vector of node displacements. A dedicated
                              constructor is made for that. Then we recall the member functions we need for post-processing.
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   Vect&lt;double&gt; u(ms,3);
   Beam3DL2 eq(ms,uf,u);
   cout &lt;&lt; "Element     Axial Force       Bending Moment    Twisting Moment   Shear Force" &lt;&lt; endl;
   MeshElements(ms) {
      Beam3DL2 eq(theElement,0.1,0.1,0.1,b);
      cout &lt;&lt; setw(8) &lt;&lt; theElementLabel;
      cout &lt;&lt; " " &lt;&lt; eq.AxialForce();
      cout &lt;&lt; " " &lt;&lt; eq.BendingMoment();
      cout &lt;&lt; " " &lt;&lt; eq.TwistingMoment();
      cout &lt;&lt; " " &lt;&lt; eq.ShearForce() &lt;&lt; endl;
   }</font></pre>
                              </td></tr></table>
                              </SPAN></p>
                              
                              <li type=square><SPAN class=TEXT>We finally show here how to create a deformed mesh
                              for a graphical presentation. We have for this the function 
                              <span class=TT><a href="../html/group__Mesh.html#g2d92b1248fa3264a3509f90872e0ec29">DeformMesh</a></span>
                              that modifies node coordinates by adding the displacement vector to the coordinates.
                              The function can also multiply the displacement by an amplification factor which is equal 
                              here to <span class=TT>1</span> by default. Then we store the resulting mesh into a new file.
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   DeformMesh(ms,u);
   ms.put("deformed_beam.m");</font></pre>
                              </td></tr></table>
                              </SPAN>
                              </ul></p>
                              
                              &nbsp;&nbsp;
                              <h2>An example</h2>
                              
                              <SPAN class=TEXT>
                              Let us run this program with an example of a straight bar <span class=TT>[0,1]</span>.
                              We define the project file:
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;
&lt;OFELI_File&gt;
   &lt;info&gt;
      &lt;title /&gt;
      &lt;date /&gt;
      &lt;author /&gt;
   &lt;/info&gt;
                              
   &lt;Project name="beam"&gt;
      &lt;mesh_file value="beam.dat"/&gt;
      &lt;data_file value="beam.dat" /&gt;
      &lt;verbose value="1" /&gt;
      &lt;output value="0"&gt;
      &lt;save value="1"/&gt;
      &lt;plot value="1"/&gt;
      &lt;init value="1"/&gt;
      &lt;plot_file value="beam.d"/&gt;
   &lt;/Project&gt;
                              
   &lt;Mesh dim="3" nb_dof="6"&gt;
      &lt;Nodes&gt;
         0.00000000e+00      0.00000000e+00      0.00000000e+00   111111
         1.25000000e-01      0.00000000e+00      0.00000000e+00        0
         2.50000000e-01      0.00000000e+00      0.00000000e+00        0
         3.75000000e-01      0.00000000e+00      0.00000000e+00        0
         5.00000000e-01      0.00000000e+00      0.00000000e+00        0
         6.25000000e-01      0.00000000e+00      0.00000000e+00        0
         7.50000000e-01      0.00000000e+00      0.00000000e+00        0
         8.75000000e-01      0.00000000e+00      0.00000000e+00        0
         1.00000000e+00      0.00000000e+00      0.00000000e+00        0
      &lt;/Nodes&gt;
      &lt;Elements shape="line"  nodes="2"&gt;
         1       2       1          2       3       1          
         3       4       1          4       5       1          
         5       6       1          6       7       1
         7       8       1          8       9       1   
      &lt;/Elements&gt;
   &lt;/Mesh&gt;
   &lt;Prescription&gt;
      &lt;PointForce x="1" dof="2"&gt;-0.01&lt;/PointForce&gt;
      &lt;PointForce x="1" dof="3"&gt; 0.01&lt;/PointForce&gt;
   &lt;/Prescription&gt;
&lt;/OFELI_File&gt;</font></pre>
                              </td></tr></table></p>                       
                              <p>
                              Let us give some explanations about this project file:
                              <ul>
                              <li>The project file contains all data necessary for the code: General problem parameters,
                              mesh data and prescriptions.
                              <li>The finite element mesh consists in 8 beam elements, where the first node (<span class=TT>x=0</span>)
                              has all its degrees of freedom constrained.
                              <li>We impose a load concentrated at the end point (<span class=TT>x=1</span>): The degrees
                              of freedom 2 and 3 are loaded. Note that since we don't prescribe any boundary condition, then
                              by default, the first end (<span class=TT>x=0</span>) is fixed.
                              </ul>
                              </span>
                              
                              <p><table align="center" border="2" cellpadding="2" cellspacing="0" >
                              <tr>
                              <td align="center" width="35"><a href="contact.html"><img src="../im/backward.gif" border="0"></a></td>
                              <td align="center" width="35"><a href="../demos.html"><img src="../im/top.gif" border="0"></a></td>
                              <td align="center" width="35"><a href="truss.html"><img src="../im/forward.gif" border="0"></a></td>
                              </tr>
                              </table>
                              
                        </div>
                     </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.flexslider-min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.countTo.js"></script>
    <script src="js/ofeli-main.js"></script>

  </body>
</html>
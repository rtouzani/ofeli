<!DOCTYPE HTML>
<html>
  <script src="http://www.w3schools.com/lib/w3data.js"></script>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="ofeli package" />
    <meta name="keywords" content="Modelling, numerical simulation, scientific computing, ofeli" />
    <title>ofeli library</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <link rel="icon" type="image/png" sizes="10x10" href="../im/r.jpg" />

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-59742926-2', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="../im/ofeli.png">
    <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700" rel="stylesheet">

    <link rel="stylesheet" href="../css/doxygen.css">
    <link rel="stylesheet" href="../css/animate.css">
    <link rel="stylesheet" href="../css/icomoon.css">
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/flexslider.css">
    <link rel="stylesheet" href="../fonts/flaticon/font/flaticon.css">
    <link rel="stylesheet" href="../css/owl.carousel.min.css">
    <link rel="stylesheet" href="../css/owl.theme.default.min.css">
    <link rel="stylesheet" href="../css/ofeli-style.css">
    <link rel="stylesheet" href="../css/doc.css">

<!--    Modernizr JS -->
    <script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
      <script src="js/respond.min.js"></script>
      <![endif]-->
  </head>

  <body>
    <div id="ofeli-page">
      <div class="container-wrap">
        <aside id="ofeli-aside" role="complementary" class="border js-fullheight">
          <div class="text-center">
            <a href="../index.html">
              <div class="logo-ofeli-img" style="background-image: url(../im/ofeli.png); background-size: 110%;"></div>
            </a>
            <span class="position"><b>Mathematical Modelling<br> and Numerical Simulation</b></span>
          </div>
          <div>
            <ul>
                <li class="active"><a href="../index.html">OFELI Documentation</a></li>
                <li class="active"><a href="../html/classes.html">Classes in OFELI</a></li>
                <li class="active"><a href="../fformats.html">File Formats</span></a></li>
                <li class="active"><a href="../extlib.html">External Libraries</span></a></li>
                <li class="active"><a href="../citing.html">Citing OFELI</span></a></li>
                <li class="active"><a href="../download.html">Download and Installation</a></li>
                <li class="active"><a href="../news.html">News</span></a></li>
                <li class="active"><a href="../presentations.html">Presentations</a></li>
                <li class="active"><a href="../copyright.html">License</a></li>
                <li class="active"><a href="mailto:rachid.touzani@uca.fr">Contact</a></li>
            </ul>
        </div>

        <a href="rita.html"><center><img src="../im/rita.png" width="90"></center></a>

<!--      Search Google -->
          <center>
            <form method=GET action="http://www.google.com/search">
              <table bgcolor="#FFFFFF">
                <tr>
                  <td><a href=" http://www.google.com/">
                    <img src="http://www.google.com/logos/Logo_40wht.gif" border="0" alt="Google" align="absmiddle"></a> 
                    <input TYPE=TEXT name=q size=31 maxlength=255 value="">
                    <input type=hidden name=hl value="en">
                    <input type=submit name=btnG value="Search">
                  </td>
                </tr>
              </table>
            </form>
          </center>
 <!--     Search Google -->
 
          <div class="ofeli-footer">
            <p><small>&copy; Copyright <script>document.write(new Date().getFullYear());</script> All rights reserved</small>
            </p>
          </div>
        </aside>
        <div id="ofeli-main">
          <section class="ofeli-start" data-section="home">
            <div class="ofeli-narrow-content">
              <div class="row">
                <div class="col-md-12">
                  <div class="row row-bottom-padded-sm animate-box" data-animate-effect="fadeInLeft">
                    <div class="col-md-12">
                      <div class="start-desc">
                        <h1 class="first-ofeli-heading"></h1>
                        <div id="cc">
                           &nbsp;
                           <p><table border="2" cellpadding="2" cellspacing="0" >
                           <tr>
                           <td align="center" width="35"><a href="laplace_demo4.html"><img src="../im/backward.gif" border="0"></a></td>
                           <td align="center" width="35"><a href="../demos.html"><img src="../im/top.gif" border="0"></a></td>
                           <td align="center" width="35"><a href="ttd2.html"><img src="../im/forward.gif" border="0"></a></td>
                           </tr>
                           </table><br>
                           <font color="#203F5B" size="4" face="verdana,Helvetica">
                           <p><b>Demo: A 2-D steady state diffusion-convection code</b></font></p>
                           <p>
                              <SPAN class=TEXT>
                              This code is developed to solve 2-D steady state diffusion-convection problems.
                              We use here a <i>user friendly</i> implementation. That is, rather than expliciting 
                              vector and matrix construction, matrix and right-hand side assembly, ... we
                              provide functions that perform all-in-one operations.
                              </SPAN>
                              
                              <h2>The Program</h2>
                              <ul type="square">
                              <li><SPAN class=TEXT>The program starts by including the header file <span class=VAR>OFELI.h</span> that itself includes all kernel
                              class definitions, then we include thermal dedicated classes described in <span class=VAR>Therm.h</span>.
                              We also declare the namespace to simplify the code writing:</span><br>
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>#include "OFELI.h"
#include "Therm.h"
using namespace OFELI;</font></pre>
                              </td></tr>
                              </table></p>
                              
                              <li><SPAN class=TEXT>We construct an instance of class <span class=VAR><a href="../html/classOFELI_1_1IPF.html">IPF</a></span> to manage project data.
                              The constructor enables giving the program name and release and the program argument is obtained here:
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   IPF data("stdc2 - 2.0",argv[1]);</font></pre>
                              </td></tr>
                              </table>
                              </SPAN></p>
                              
                              <li><SPAN class=TEXT>
                              The member function <span class=VAR>getVerbose()</span> returns the parameter that controls message output.
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   if (data.getVerbose())
      ...</font></pre>
                              </td></tr>
                              </table>
                              </SPAN></p>
                              
                              <li><SPAN class=TEXT>
                              We now read mesh data and construct an instance of class <span class=VAR><a href="../html/classOFELI_1_1Mesh.html">Mesh</a></span>
                              and an instance of class <span class=VAR><a href="../html/classOFELI_1_1Prescription.html">Prescription</a></span> to prescribe various data that we will
                              describe later. Note that these data prescription are provided in the file
                              <span class=VAR>data.getPrescriptionFile()</span>:
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   Mesh ms(data.getMeshFile(),true);
   Prescription p(ms,data.getPrescriptionFile());</font></pre>
                              </td></tr></table>
                              </span></p>
                              
                              <li><SPAN class=TEXT>
                              Other types of data are the vectors that will contain problem data.
                              Here we choose a sparse storage in order to use an iterative solution method. Vector data
                              are the solution <span class=VAR>u</span>, Dirichlet boundary condition contained in <span class=VAR>
                              bc</span> and boundary fluxes (Neumann boundary conditions) in <span class=VAR>bound_f</span>.
                              Note that the constructors of theses vectors use the 
                              <span class=VAR><a href="../html/classOFELI_1_1Mesh.html">Mesh</a></span> instance.
                              The vectors contain then mesh information.
                              
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   Vect&lt;double&gt; u(ms,"Temperature");
   Vect&lt;double&gt; bc(ms), body_f(ms), bound_f(ms);</font></pre>
                              </td></tr></table></p>
                              
                              <li><SPAN class=TEXT>
                              Vectors <span class=VAR>u</span>, <span class=VAR>bc</span> and <span class=VAR>bound_f</span>
                              are initialized from member function <span class=VAR>get</span> of the instance of 
                              class <span class=VAR>Prescription</span>:
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   p.get(BOUNDARY_CONDITION,bc);
   p.get(SOURCE,body_f);
   p.get(FLUX,bound_f);</font></pre>
                              </td></tr></table></p>
                              <p>
                              Note that <span class=VAR>BOUNDARY_CONDITION</span>, <span class=VAR>SOURCE</span> and
                              <span class=VAR>FLUX</span> are integers defined in an <i>enum</i> variable. They enable selecting the
                              type of condition to enforce.</p>
                              
                              <li><SPAN class=TEXT>
                              Since we deal with a diffusion-convection problem, we have to provide a velocity vector.
                              We first instantiate the velocity vector, check if the project file contains the flag for 
                              velocity. In this case, we read by using class <span class=VAR>
                              <a href="../html/classOFELI_1_1IOField.html">IOField</a></span> the vector
                              <span class=VAR>v</span>:
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   Vect&lt;double&gt; v(ms,2);
   if (data.getInteger("v_flag")) {
      IOField ff(data.getMeshFile(),data.getString("v_file"),ms,IOField::IN);
      ff.get(v);
   }</font></pre>
                              </td></tr></table></p>

                              <li><SPAN class=TEXT>
                              We can now declare an equation. We instantiate class <span class=VAR>DC2DT3</span> that solves
                              diffusion-convection equations in 2-D using triangular P<sub>1</sub> (3-node) elements.
                              After instantiation, we transfer to the class various informations: the mesh, the vector 
                              <span class=VAR>u</span> that will contain solution at nodes, boundary condition vector, source vector,
                              and velocity vector.
                              
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   DC2DT3 eq;
   eq.setMesh(ms);
   eq.setInput(SOLUTION,u);
   eq.setInput(BOUNDARY_CONDITION,bc);
   eq.setInput(SOURCE,body_f);
   eq.setInput(FLUX,bound_f);
   eq.setInput(VELOCITY_FIELD,v);</font></pre>
                              </td></tr></table></p>
                              
                              <li><SPAN class=TEXT>
                              With all these data, we can choose some options for the solver. Namely, we define the terms
                              in the equation (Diffusion and convection) and then choose an iterative solver (Gmres) coupled
                              with the ILU preconditioner. We then solve the problem by invoking the member function 
                              <span class=VAR>run</span>:
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   eq.setTerms(DIFFUSION|CONVECTION);
   eq.setSolver(GMRES_SOLVER,ILU_PREC);
   int it = eq.run();</font></pre>
                              </td></tr></table></p>
                              
                              <li><SPAN class=TEXT>
                              We end the program by outputting the solution and saving it for plotting purposes:
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>   if (data.getOutput() > 0)
      cout << u;
   if (data.getPlot()) {
      IOField pf(data.getPlotFile(),IOField::OUT);
      pf.put(u);
   }</font></pre>
                              </td></tr></table>
                              </ul></p>
                              
                              &nbsp;&nbsp;
                              <h2>An example</h2>
                              
                              <SPAN class=TEXT>
                              Let us run this program with the data presented in the following project file:
                              </span>
                              <p><table bgcolor="#e0f8f7" border="1" frame=box rules=none width=700>
                              <tr><td>
                              <pre><font color="blue" size=2>  &lt;Project name="proj"&gt;
    &lt;mesh_file&gt;proj.m&lt;/mesh_file&gt;
    &lt;parameter label="v_flag" value="1"/&gt;
    &lt;parameter label="v_file"&gt;proj.v&lt;/parameter&gt;
    &lt;plot_file&gt;proj.t&lt;/plot_file&gt;
    &lt;verbose&gt;1&lt;/verbose&gt;
    &lt;output&gt;1&lt;/output&gt;
    &lt;plot&gt;1&lt;/plot&gt;
  &lt;/Project&gt;
  &lt;Prescription&gt;
    &lt;BoundaryCondition code="1"&gt;1.0&lt;/BoundaryCondition&gt;
  &lt;/Prescription&gt;</font></pre>
                              </td></tr></table>
                              <p><SPAN class=TEXT>Let us give a brief description of this file contents:</span>
                              
                              <ul>
                              <li type=circle><SPAN class=TEXT>
                              The project is called <span class=VAR>proj</span>. The name of a project yields some defaults for
                              parameters and file names.</span>
                              <li type=circle><SPAN class=TEXT>The mesh file is called <span class=VAR>proj.m</span>
                              <li type=circle><SPAN class=TEXT>We have a flag parameter that says that a velocity is present
                              for the convection contribution. This parameter can be retrieved by
                              the label <span class=VAR>v_flag</span></span>
                              <li type=circle><SPAN class=TEXT>The vector containing the given velocity field is present in 
                              the file <span class=VAR>proj.v</span>. This file name can be retrieved by the label 
                              <span class=VAR>proj.v</span></span>
                              <li type=circle><SPAN class=TEXT>The tag <span class=VAR>plot_file</span> refers to a string that will be
                              accessed in the <span class=VAR><a href="../html/classOFELI_1_1IPF.html">IPF</a></span> class in order to define a file for storing the solution</span>
                              <li type=circle><SPAN class=TEXT>The next three lines describe parameters for message outputting,
                              solution output and the opportunity of storing the solution in a plot file</span>
                              <li type=circle><SPAN class=TEXT>Once the <span class=VAR>Project</span> tag is closed, we define a 
                              <span class=tt>Prescription</span> tag to define prescribed boundaty conditions. Here, the tag
                              <span class=tt>BoundaryCondition</span> chooses the type of prescription. The option <span class=VAR>
                              code</span> says that nodes with code equal to <span class=VAR>1</span> are concerned with the
                              prescription. Then, the value <span class=TT>1.0</span> is prescribed for this code.</span> 
                              </ul>
                              
                              <p><table align="center" border="2" cellpadding="2" cellspacing="0" >
                              <tr>
                              <td align="center" width="35"><a href="laplace_demo4.html"><img src="../im/backward.gif" border="0"></a></td>
                              <td align="center" width="35"><a href="../demos.html"><img src="../im/top.gif" border="0"></a></td>
                              <td align="center" width="35"><a href="ttd2.html"><img src="../im/forward.gif" border="0"></a></td>
                              </tr>
                              </table>
                          </div>
                     </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.flexslider-min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.countTo.js"></script>
    <script src="js/ofeli-main.js"></script>

  </body>
</html>